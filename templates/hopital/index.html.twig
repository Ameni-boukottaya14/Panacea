{% extends 'back.html.twig' %}

{% block title %}Hopital index{% endblock %}

{% block body %}

    <div class="container">
        <h1 class="mt-5 mb-4">Hopital </h1>
        <a href="{{ path('app_hopital_new') }}" class="btn btn-primary mt-4 mb-4"> <!-- Added spacing top and bottom -->
            <i class="bi bi-plus"></i> Create New <!-- Added an icon -->
        </a>
        <style>
            .card.border-black {
                border: 2px solid black;
            }
            .card-img-top {
                width: 100%;
                height: auto;
            }
            .emergency-icon {
                color: red;
            }
        </style>

        <div id="all">
            {% include 'hopital/ajax.html.twig' %}
        </div>

        <script
                src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
        </script>
        <script>
            $(document).ready(function() {
                var currentRequest = null;
                $("#advanced").keyup(function(e){
                    /* La variable value va prendre la valeur insérer dans le champ de texte
                    afin d’effectuer la recherche */
                    var value = $(this).val();
                    if(currentRequest != null) {
                        currentRequest.abort();
                    }
                    /* Ajax est lancé lors du remplissage du champ texte dont l’id est
                    « search » pour faire la recherche */
                    currentRequest = $.ajax({
                        url : "{{ path('app_ajax_hopital') }}",
                        type : 'GET',
                        data: {
                            'searchValue' : value
                        },
                        success : function(retour)
                        {
                            $('#all').html(retour);
                        },
                    });
                    return false;
                });
            });
        </script>
    </div>

    <script>
        // Activate the carousels
        var carousels = document.querySelectorAll('.carousel');
        carousels.forEach(function(carousel) {
            new bootstrap.Carousel(carousel, {
                interval: 3000, // Change slide every 3 seconds
                wrap: true
            });
        });
    </script>
{% endblock %}
